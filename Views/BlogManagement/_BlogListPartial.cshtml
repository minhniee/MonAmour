@model List<MonAmour.ViewModels.BlogListViewModel>

@foreach (var blog in Model)
{
    <tr>
        <td>
            @if (!string.IsNullOrEmpty(blog.FeaturedImage))
            {
                <img src="@blog.FeaturedImage" alt="@blog.Title" class="img-thumbnail" style="width: 60px; height: 60px; object-fit: cover;">
            }
            else
            {
                <div class="bg-light d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                    <i class="fas fa-image text-muted"></i>
                </div>
            }
        </td>
        <td>
            <div class="fw-bold">@blog.Title</div>
            @if (!string.IsNullOrEmpty(blog.Excerpt))
            {
                <small class="text-muted">@(blog.Excerpt.Length > 100 ? blog.Excerpt.Substring(0, 100) + "..." : blog.Excerpt)</small>
            }
        </td>
        <td>@(blog.AuthorName ?? "N/A")</td>
        <td>@(blog.CategoryName ?? "N/A")</td>
        <td>@(blog.CreatedAt?.ToString("dd/MM/yyyy HH:mm") ?? "N/A")</td>
        <td>
            <span class="badge bg-info">@(blog.ViewCount ?? 0)</span>
        </td>
        <td>
            <span class="badge bg-secondary">@blog.CommentCount</span>
        </td>
        <td>
            @if (blog.IsPublished == true)
            {
                <span class="badge bg-success">Đã xuất bản</span>
            }
            else
            {
                <span class="badge bg-warning">Chưa xuất bản</span>
            }
        </td>
        <td>
            @if (blog.IsFeatured == true)
            {
                <span class="badge bg-primary">Nổi bật</span>
            }
            else
            {
                <span class="badge bg-light text-dark">Thường</span>
            }
        </td>
        <td>
            <div class="btn-group" role="group">
                <a asp-action="BlogDetail" asp-route-id="@blog.BlogId" class="btn btn-sm btn-info" title="Xem chi tiết">
                    <i class="fas fa-eye"></i>
                </a>
                <a asp-action="EditBlog" asp-route-id="@blog.BlogId" class="btn btn-sm btn-warning" title="Chỉnh sửa">
                    <i class="fas fa-edit"></i>
                </a>
                <button type="button" class="btn btn-sm btn-@(blog.IsPublished == true ? "warning" : "success")" 
                        onclick="toggleBlogStatus(@blog.BlogId)" title="@(blog.IsPublished == true ? "Ẩn" : "Hiện")">
                    <i class="fas fa-@(blog.IsPublished == true ? "eye-slash" : "eye")"></i>
                </button>
                <button type="button" class="btn btn-sm btn-@(blog.IsFeatured == true ? "secondary" : "primary")" 
                        onclick="toggleFeaturedStatus(@blog.BlogId)" title="@(blog.IsFeatured == true ? "Bỏ nổi bật" : "Đặt nổi bật")">
                    <i class="fas fa-star"></i>
                </button>
                <button type="button" class="btn btn-sm btn-danger" onclick="deleteBlog(@blog.BlogId)" title="Xóa">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </td>
    </tr>
}
