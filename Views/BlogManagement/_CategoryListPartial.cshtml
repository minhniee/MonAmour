@model List<MonAmour.ViewModels.BlogCategoryListViewModel>

@if (Model != null && Model.Any())
{
    <div class="table-responsive">
        <table class="table table-bordered" id="categoryTable" width="100%" cellspacing="0">
            <thead>
                <tr>
                    <th>Tên danh mục</th>
                    <th>Mô tả</th>
                    <th>Slug</th>
                    <th>Số bài viết</th>
                    <th>Trạng thái</th>
                    <th>Ngày tạo</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var category in Model)
                {
                    <tr>
                        <td>
                            <strong>@category.Name</strong>
                        </td>
                        <td>
                            @if (!string.IsNullOrEmpty(category.Description))
                            {
                                @(category.Description.Length > 100 ? category.Description.Substring(0, 100) + "..." : category.Description)
                            }
                            else
                            {
                                <span class="text-muted">Không có mô tả</span>
                            }
                        </td>
                        <td>
                            @if (!string.IsNullOrEmpty(category.Slug))
                            {
                                <code>@category.Slug</code>
                            }
                            else
                            {
                                <span class="text-muted">N/A</span>
                            }
                        </td>
                        <td>
                            <span class="badge bg-info">@category.BlogCount</span>
                        </td>
                        <td>
                            @if (category.IsActive == true)
                            {
                                <span class="badge bg-success">Hoạt động</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">Không hoạt động</span>
                            }
                        </td>
                        <td>@(category.CreatedAt?.ToString("dd/MM/yyyy HH:mm") ?? "N/A")</td>
                        <td>
                            <div class="btn-group" role="group">
                                <a asp-action="EditCategory" asp-route-id="@category.CategoryId" class="btn btn-sm btn-warning" title="Chỉnh sửa">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <button type="button" class="btn btn-sm btn-@(category.IsActive == true ? "warning" : "success")" 
                                        onclick="toggleCategoryStatus(@category.CategoryId)" title="@(category.IsActive == true ? "Vô hiệu hóa" : "Kích hoạt")">
                                    <i class="fas fa-@(category.IsActive == true ? "pause" : "play")"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-danger" onclick="deleteCategory(@category.CategoryId)" title="Xóa">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
else
{
    <div class="text-center py-4">
        <div class="text-muted">
            <i class="fas fa-search fa-3x mb-3"></i>
            <p class="mb-0">Không tìm thấy danh mục nào phù hợp với tiêu chí tìm kiếm</p>
        </div>
    </div>
}
