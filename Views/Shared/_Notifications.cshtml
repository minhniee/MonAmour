@{
    var success = TempData["SuccessMessage"] as string;
    var error = TempData["ErrorMessage"] as string;
    var info = TempData["InfoMessage"] as string;
}

@if (!string.IsNullOrWhiteSpace(success))
{
    <div class="mx-auto max-w-3xl mb-4 rounded-md border border-green-200 bg-green-50 text-green-800 px-4 py-3 shadow-sm transform transition-all duration-300 opacity-0 -translate-y-2" role="status" aria-live="polite" data-auto-dismiss="true" data-notification>
        <div class="flex items-start gap-2">
            <svg class="h-5 w-5 mt-0.5 text-green-600" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414L9 13.414l4.707-4.707z" clip-rule="evenodd" />
            </svg>
            <div class="text-sm flex-1">@success</div>
            <button type="button" class="ml-2 text-green-700/70 hover:text-green-900" aria-label="Close" data-close-notification>
                <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>
    </div>
}

@if (!string.IsNullOrWhiteSpace(error))
{
    <div class="mx-auto max-w-3xl mb-4 rounded-md border border-red-200 bg-red-50 text-red-800 px-4 py-3 shadow-sm transform transition-all duration-300 opacity-0 -translate-y-2" role="alert" aria-live="assertive" data-auto-dismiss="true" data-notification>
        <div class="flex items-start gap-2">
            <svg class="h-5 w-5 mt-0.5 text-red-600" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9 7a1 1 0 112 0v4a1 1 0 11-2 0V7zm1 8a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 15z" clip-rule="evenodd" />
            </svg>
            <div class="text-sm flex-1">@error</div>
            <button type="button" class="ml-2 text-red-700/70 hover:text-red-900" aria-label="Close" data-close-notification>
                <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>
    </div>
}

@if (!string.IsNullOrWhiteSpace(info))
{
    <div class="mx-auto max-w-3xl mb-4 rounded-md border border-blue-200 bg-blue-50 text-blue-800 px-4 py-3 shadow-sm transform transition-all duration-300 opacity-0 -translate-y-2" role="status" aria-live="polite" data-auto-dismiss="true" data-notification>
        <div class="flex items-start gap-2">
            <svg class="h-5 w-5 mt-0.5 text-blue-600" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M18 10A8 8 0 11.001 10 8 8 0 0118 10zM9 9a1 1 0 112 0v5a1 1 0 11-2 0V9zm1-4a1.25 1.25 0 100 2.5A1.25 1.25 0 0010 5z" clip-rule="evenodd" />
            </svg>
            <div class="text-sm flex-1">@info</div>
            <button type="button" class="ml-2 text-blue-700/70 hover:text-blue-900" aria-label="Close" data-close-notification>
                <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>
    </div>
}

<script>
    (function () {
        const containers = document.querySelectorAll('[data-auto-dismiss]');
        containers.forEach(function (el) {
            // Validate: only auto-dismiss if element has visible text content
            const hasText = el && el.textContent && el.textContent.trim().length > 0;
            if (!hasText) return;

            // Animate in (slide down + fade in)
            requestAnimationFrame(function () {
                el.classList.remove('opacity-0');
                el.classList.remove('-translate-y-2');
            });

            const hide = function () {
                el.classList.add('-translate-y-2');
                el.style.opacity = '0';
                setTimeout(function () { el.remove(); }, 300);
            };

            const closeBtn = el.querySelector('[data-close-notification]');
            if (closeBtn) {
                closeBtn.addEventListener('click', function (e) {
                    e.preventDefault();
                    hide();
                });
            }

            setTimeout(hide, 3000);
        });
    })();
    </script>


