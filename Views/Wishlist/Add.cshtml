@model MonAmour.AuthViewModel.AddToWishListViewModel
@{
    ViewData["Title"] = "Thêm Vào Danh Sách Yêu Thích";
    Layout = "_Layout";
}

<div class="min-h-screen bg-beige">
    <div class="max-w-2xl mx-auto px-4 py-8">
        <div class="mb-6">
            <nav aria-label="breadcrumb">
                <ol class="flex items-center space-x-2 text-sm text-gray-600">
                    <li><a href="@Url.Action("Index")" class="hover:text-wine-red">Danh Sách Yêu Thích</a></li>
                    <li class="before:content-['/'] before:mx-2">Thêm Mục</li>
                </ol>
            </nav>
            <h1 class="text-3xl font-serif font-bold text-wine-red mt-4">Thêm Vào Danh Sách Yêu Thích</h1>
        </div>

        <div class="bg-white rounded-lg shadow-sm border p-6">
            <form asp-action="Add" method="post">
                @Html.AntiForgeryToken()
                <input asp-for="UserId" type="hidden" />
                
                <div asp-validation-summary="ModelOnly" class="mb-4 p-4 bg-red-50 border border-red-200 rounded-md text-red-700" role="alert"></div>

                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Chọn loại mục muốn thêm:</h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <input type="radio" id="productOption" name="itemType" value="product" class="h-4 w-4 text-wine-red border-gray-300 focus:ring-wine-red" onchange="toggleItemType()">
                            <label for="productOption" class="ml-3 block text-sm font-medium text-gray-700">
                                <i class="fas fa-box text-wine-red mr-2"></i>Sản Phẩm
                            </label>
                        </div>
                        
                        <div class="flex items-center">
                            <input type="radio" id="conceptOption" name="itemType" value="concept" class="h-4 w-4 text-wine-red border-gray-300 focus:ring-wine-red" onchange="toggleItemType()">
                            <label for="conceptOption" class="ml-3 block text-sm font-medium text-gray-700">
                                <i class="fas fa-lightbulb text-wine-red mr-2"></i>Ý Tưởng
                            </label>
                        </div>
                    </div>
                </div>

                <div id="productSection" class="mb-6 hidden">
                    <label asp-for="ProductId" class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-box text-wine-red mr-2"></i>ID Sản Phẩm
                    </label>
                    <input asp-for="ProductId" type="number" min="1" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-wine-red focus:border-wine-red" 
                           placeholder="Nhập ID sản phẩm">
                    <span asp-validation-for="ProductId" class="text-sm text-red-600 mt-1 block"></span>
                    <p class="text-sm text-gray-500 mt-1">Nhập ID của sản phẩm bạn muốn thêm vào danh sách yêu thích.</p>
                </div>

                <div id="conceptSection" class="mb-6 hidden">
                    <label asp-for="ConceptId" class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-lightbulb text-wine-red mr-2"></i>ID Ý Tưởng
                    </label>
                    <input asp-for="ConceptId" type="number" min="1" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-wine-red focus:border-wine-red" 
                           placeholder="Nhập ID ý tưởng">
                    <span asp-validation-for="ConceptId" class="text-sm text-red-600 mt-1 block"></span>
                    <p class="text-sm text-gray-500 mt-1">Nhập ID của ý tưởng bạn muốn thêm vào danh sách yêu thích.</p>
                </div>

                <div class="flex items-center justify-between pt-6 border-t border-gray-200">
                    <a href="@Url.Action("Index")" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                        <i class="fas fa-arrow-left mr-2"></i>Quay Lại
                    </a>
                    <button type="submit" class="px-6 py-2 text-sm font-medium text-white bg-wine-red border border-transparent rounded-md hover:bg-wine-red/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-wine-red">
                        <i class="fas fa-heart mr-2"></i>Thêm Vào Yêu Thích
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function toggleItemType() {
        const productOption = document.getElementById('productOption');
        const conceptOption = document.getElementById('conceptOption');
        const productSection = document.getElementById('productSection');
        const conceptSection = document.getElementById('conceptSection');
        const productInput = document.querySelector('input[name="ProductId"]');
        const conceptInput = document.querySelector('input[name="ConceptId"]');

        if (productOption.checked) {
            productSection.classList.remove('hidden');
            conceptSection.classList.add('hidden');
            conceptInput.value = '';
        } else if (conceptOption.checked) {
            conceptSection.classList.remove('hidden');
            productSection.classList.add('hidden');
            productInput.value = '';
        } else {
            productSection.classList.add('hidden');
            conceptSection.classList.add('hidden');
            productInput.value = '';
            conceptInput.value = '';
        }
    }

    // Initialize form state
    document.addEventListener('DOMContentLoaded', function() {
        const productInput = document.querySelector('input[name="ProductId"]');
        const conceptInput = document.querySelector('input[name="ConceptId"]');
        
        if (productInput.value) {
            document.getElementById('productOption').checked = true;
            toggleItemType();
        } else if (conceptInput.value) {
            document.getElementById('conceptOption').checked = true;
            toggleItemType();
        }
    });
</script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
